(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{500:function(a,t,s){a.exports=s.p+"assets/img/function-scope.45e3226d.png"},501:function(a,t,s){a.exports=s.p+"assets/img/scope.8b5cd649.png"},546:function(a,t,s){"use strict";s.r(t);var n=s(2),r=Object(n.a)({},function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h2",{attrs:{id:"作用域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#作用域","aria-hidden":"true"}},[a._v("#")]),a._v(" 作用域")]),a._v(" "),n("p",[a._v("作用域（scope）是变量与函数在程序中的可见性范围。作用域控制着当前执行代码对变量与函数的访问权限。\n作用域有两种常见的模型，一种叫做"),n("strong",[a._v("词法作用域(Lexical Scope)")]),a._v(", 一种叫做"),n("strong",[a._v("动态作用域(Dynamic Scope)")]),a._v("。JavaScript 采用的是词法作用域，也是静态作用域。")]),a._v(" "),n("h3",{attrs:{id:"词法作用域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#词法作用域","aria-hidden":"true"}},[a._v("#")]),a._v(" 词法作用域")]),a._v(" "),n("p",[a._v("词法作用域是在书写代码或者定义时确定的，而动态作用域是在运行是确定的，前者关注函数在何处声明，而动态作用域关注函数从何处调用。")]),a._v(" "),n("p",[a._v("举个例子说明：")]),a._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br")])]),n("p",[a._v("因为 Javascript 是采用词法作用域，所以 bar 函数执行后 foo 函数执行，foo 函数从内部查找是否有局部变量 a, 如果没有，就根据书写的位置，查找上面一层的代码， 也就是 a = 1, 所以结果打印1。")]),a._v(" "),n("h3",{attrs:{id:"作用域类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#作用域类型","aria-hidden":"true"}},[a._v("#")]),a._v(" 作用域类型")]),a._v(" "),n("p",[a._v("作用域有"),n("strong",[a._v("全局作用域")]),a._v("、"),n("strong",[a._v("函数作用域")]),a._v("以及ES6之后的"),n("strong",[a._v("块级作用域")]),a._v("。")]),a._v(" "),n("h4",{attrs:{id:"全局作用域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#全局作用域","aria-hidden":"true"}},[a._v("#")]),a._v(" 全局作用域")]),a._v(" "),n("p",[a._v("在代码中任何地方都能访问到的对象拥有全局作用域。一般情况以下几种情况拥有全局作用域。")]),a._v(" "),n("ul",[n("li",[a._v("最外层函数")]),a._v(" "),n("li",[a._v("所有未定义直接赋值的变量自动声明为全局变量，拥有全局作用域")]),a._v(" "),n("li",[a._v("window对象")])]),a._v(" "),n("h4",{attrs:{id:"函数作用域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#函数作用域","aria-hidden":"true"}},[a._v("#")]),a._v(" 函数作用域")]),a._v(" "),n("p",[a._v("是指声明在函数内部的变量，只在当前函数内部可以访问。内部嵌套的作用域会进行分层，"),n("strong",[a._v("内层作用域可以访问外层作用域的变量，反之则不行")])]),a._v(" "),n("img",{staticStyle:{margin:"0 auto",display:"block"},attrs:{src:s(500),width:"400"}}),a._v(" "),n("p",[a._v("作用域访问：③ -> ② -> ①， 不可逆。"),n("br"),a._v("\n可以理解作用域访问过程是，在一个建筑里面有一部只能升不能降的电梯，只能向上查找直到全局作用域。")]),a._v(" "),n("img",{staticStyle:{margin:"0 auto",display:"block"},attrs:{src:s(501),width:"240"}}),a._v(" "),n("h4",{attrs:{id:"块级作用域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#块级作用域","aria-hidden":"true"}},[a._v("#")]),a._v(" 块级作用域")]),a._v(" "),n("p",[a._v("块级作用域可以通过 let 和 const 声明，声明的变量在指定块的作用域外无法被访问。花括号"),n("code",[a._v("{}")]),a._v("中间内的块语句也是是块级作用域。")]),a._v(" "),n("h3",{attrs:{id:"动态作用域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#动态作用域","aria-hidden":"true"}},[a._v("#")]),a._v(" 动态作用域")]),a._v(" "),n("p",[a._v("动态作用域中，变量的值与定义无关，由运行是决定。\nbash 就是动态作用域，可以尝试将下面代码保存为 scope.bash 文件，用命令 bash ./scope.bash 运行，看看打印的值是多少")]),a._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[a._v("a"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("1\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" foo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("echo")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" bar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  local a"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  foo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\nbar\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br")])]),n("p",[a._v("最终的结果是2。")]),a._v(" "),n("h2",{attrs:{id:"参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[a._v("#")]),a._v(" 参考")]),a._v(" "),n("p",[a._v("1、"),n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/30121515",target:"_blank",rel:"noopener noreferrer"}},[a._v("从上下文，到作用域"),n("OutboundLink")],1),n("br"),a._v("\n2、"),n("a",{attrs:{href:"https://github.com/mqyqingfeng/Blog/issues/3",target:"_blank",rel:"noopener noreferrer"}},[a._v("JavaScript深入之词法作用域和动态作用域"),n("OutboundLink")],1),n("br"),a._v("\n3、"),n("a",{attrs:{href:"https://juejin.im/post/5c8290455188257e5d0ec64f",target:"_blank",rel:"noopener noreferrer"}},[a._v("深入理解JavaScript作用域和作用域链"),n("OutboundLink")],1)])])},[],!1,null,null,null);t.default=r.exports}}]);