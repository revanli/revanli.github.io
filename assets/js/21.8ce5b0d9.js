(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{495:function(e,t,a){e.exports=a.p+"assets/img/figure-how-to-contribute.f41dd7be.png"},539:function(e,t,a){"use strict";a.r(t);var r=a(2),s=Object(r.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[e._v("对于 React 这样大型的项目来说，如果不了解其设计思路，直接钻进海量的代码里，最终的结果就是消磨兴趣，从入门到放弃。"),r("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/36996225",target:"_blank",rel:"noopener noreferrer"}},[e._v("如何阅读大型前端开源项目的源码"),r("OutboundLink")],1),e._v("一文说得很好，阅读源码应该是问题驱动，带着问题去了解源码，会有的放矢。这篇文章主要讲我是怎样阅读源码的。目的是在阅读源码的时候，可以更高效的定位到自己想要看的代码。")]),e._v(" "),r("h2",{attrs:{id:"了解脉络"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#了解脉络","aria-hidden":"true"}},[e._v("#")]),e._v(" 了解脉络")]),e._v(" "),r("p",[e._v("先去 google 搜索一下相关的资料，找几篇点赞量比较高，时间比较新的文章看看，大概先了解下 React 的设计思路和核心概念。然后把源码 clone 到本地，通过 readme 了解源码的组织形式，然后通过 demo 和 debug 的形式去理解代码。")]),e._v(" "),r("h2",{attrs:{id:"如何debug"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#如何debug","aria-hidden":"true"}},[e._v("#")]),e._v(" 如何debug")]),e._v(" "),r("h3",{attrs:{id:"clone"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#clone","aria-hidden":"true"}},[e._v("#")]),e._v(" clone")]),e._v(" "),r("p",[e._v("clone代码，选择16.8.0的版本进行阅读，通过官方文档 "),r("a",{attrs:{href:"https://reactjs.org/docs/codebase-overview.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Codebase Overview"),r("OutboundLink")],1),e._v(" 理解源码结构。")]),e._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone git@github.com:facebook/react.git\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("cd")]),e._v(" react\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" checkout tags/v16.8.0\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br")])]),r("h3",{attrs:{id:"创建一个-demo-项目"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#创建一个-demo-项目","aria-hidden":"true"}},[e._v("#")]),e._v(" 创建一个 demo 项目")]),e._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("$ create-react-app play-react-app\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])]),r("h3",{attrs:{id:"debug"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#debug","aria-hidden":"true"}},[e._v("#")]),e._v(" debug")]),e._v(" "),r("p",[e._v("先按照官方文档"),r("a",{attrs:{href:"https://reactjs.org/docs/how-to-contribute.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Codebase Overview"),r("OutboundLink")],1),e._v(" 提议的方式，把 react 和 react-dom 打包成 umd 类型的文件 link 到上面创建的 demo 项目中，在关键的函数中加上"),r("code",[e._v("debugger")]),e._v("语句，然后在 React 根目录中运行 "),r("code",[e._v("yarn build")]),e._v("，demo 项目中的 "),r("code",[e._v("node_modules")]),e._v(" 就会出现最新的 react 和 react-dom 包，就可以愉快的打断点调试了。源码中有较多的循环，可以多使用写"),r("code",[e._v("console.log")]),e._v("或者"),r("code",[e._v("console.trace")]),e._v("去查看每次循环的变更，这样比较容易理解循环的目的。")]),e._v(" "),r("p",[r("strong",[e._v("调试技巧")])]),e._v(" "),r("ol",[r("li",[e._v("利用浏览器的开发者工具，在适当的地方打断点"),r("code",[e._v("debugger")]),e._v("或者"),r("code",[e._v("console.log")]),e._v("，进行追踪")]),e._v(" "),r("li",[e._v("全局搜索大法")]),e._v(" "),r("li",[e._v("充分利用"),r("code",[e._v("console.trace")]),e._v("，打印出函数的调用栈，分析函数的调用关系")])]),e._v(" "),r("p",[r("img",{attrs:{src:a(495),alt:"how-to-contribute"}})]),e._v(" "),r("h2",{attrs:{id:"适当记录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#适当记录","aria-hidden":"true"}},[e._v("#")]),e._v(" 适当记录")]),e._v(" "),r("p",[e._v("React 的源码是公认的难读，一是函数分的很细，二是调用栈很深，往往看着看着就容易迷失方向，不得不重新开始，这个时候就需要适当做下记录，记录下流程，重要的函数，画下流程图，图远比干巴巴的文字形象方便，思路断了也容易追踪，然后把大的问题分解成小的问题逐步去弄清楚，多运行调试几遍。")])])},[],!1,null,null,null);t.default=s.exports}}]);